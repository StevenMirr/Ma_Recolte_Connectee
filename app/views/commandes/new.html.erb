<div class="container-valid-commande">
  <div class="table-container">
    <h1 class="text-center mb-5">Récapitulatif</h1>
    <table>
      <thead>
        <tr>
          <th>Nom du Produit</th>
          <th>Prix unitaire/kg</th>
          <th>Quantité</th>
          <th>Total</th>
        </tr>
      </thead>
      <tbody>
        <% total_price = 0 %>
        <% @baskets.group_by(&:produit).each do |produit, baskets| %>
          <tr>
            <td><%= produit.name %></td>
            <td class="text-center"><%= number_with_precision(produit.price, precision: 2) %> €</td>
            <td class="text-center"><%= baskets.count %></td>
            <td class="text-center"><%= number_with_precision(produit.price, precision: 2) * baskets.count %> €</td>
          </tr >
          <% total_price += produit.price * baskets.count %>
        <% end %>
        <tr>
          <td colspan="3" class="text-right">Prix Total :</td>
          <td><%= number_with_precision(total_price, precision: 2) %> €</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="form-creneau">
    <h1 class="text-center mb-5">Choisi ton créneau de retrait et confirme ta commande</h1>
    <div class="form_input">
      <%= simple_form_for(@creneau) do |form| %>
        <%= form.input :date %>
        <%= form.input :start_time %>
        <%= form.input :end_time %>

        <div class="form-actions mt-5">
          <%= form.button :submit, 'Confirmer ma commande', class:"button" %>
        </div>
      <% end %>
    </div>
  </div>
</div>
