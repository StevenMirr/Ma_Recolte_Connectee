<div class="container">
  <div class="table-container">
    <table>
      <thead>
        <tr>
          <th>Nom du Produit</th>
          <th>Prix unitaire</th>
          <th>Quantité</th>
          <th>Total</th>
        </tr>
      </thead>
      <tbody>
        <% total_price = 0 %>
        <% @baskets.group_by(&:produit).each do |produit, baskets| %>
          <tr>
            <td><%= produit.name %></td>
            <td class="text-center"><%= produit.price %> €</td>
            <td class="text-center"><%= baskets.count %></td>
            <td class="text-center"><%= produit.price * baskets.count %> €</td>
          </tr >
          <% total_price += produit.price * baskets.count %>
        <% end %>
        <tr>
          <td colspan="3" class="text-right">Prix Total :</td>
          <td><%= total_price %> €</td>
        </tr>
      </tbody>
    </table>

  <%= form_with(model: [@commande, @creneau], local: true) do |form| %>
  <div>
    <label for="creneau_start_time">Veuillez choisir une heure de rendez-vous (heures d'ouverture entre 15:00 et 19:00) :</label>
    <%= form.time_field :start_time, min: "15:00", max: "19:00", required: true %>
  </div>
  <div>
    <%= form.submit "Confirmer ma commande" %>
  </div>
<% end %>
  </div>
</div>
